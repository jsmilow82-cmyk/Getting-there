<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Greenpoint Exercises</title>
  <style>
    :root { color-scheme: light; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:#fff;
      margin:0;
      padding:24px;
      line-height:1.5;
    }
    .page{
      max-width: 980px;
      margin: 0 auto;
    }
    h1{ margin:0 0 8px; font-size: 28px; }
    .sub{ margin:0 0 20px; opacity:.75; }

    .section{
      border:1px solid #e3e3e3;
      border-radius:16px;
      padding:18px;
      margin: 14px 0;
    }
    .section h2{
      margin:0 0 10px;
      font-size:18px;
    }
    .prompt{ margin: 6px 0 12px; font-size:16px; }
    .row{ display:flex; gap:10px; flex-wrap: wrap; align-items:center; }

    input[type="text"]{
      width: 220px;
      padding:8px 10px;
      border:1px solid #bbb;
      border-radius:10px;
      font-size:15px;
    }
    .gap{
      width: 160px;
      padding: 8px 10px;
      border: 1px solid #bbb;
      border-radius: 10px;
      font-size: 16px;
      vertical-align: middle;
    }

    button{
      padding:10px 14px;
      font-size:14px;
      border-radius:10px;
      border:1px solid #bbb;
      background:#fff;
      cursor:pointer;
    }
    button:hover{ background:#f6f6f6; }

    .options{
      display:grid;
      gap:8px;
      margin-top:8px;
    }
    label{
      display:flex;
      gap:8px;
      align-items:flex-start;
      cursor:pointer;
    }

    .feedback{
      margin-top:12px;
      padding:12px;
      border-radius:12px;
      border:1px solid #ddd;
      display:none;
    }
    .feedback.good{ border-color:#7cc47c; }
    .feedback.bad{ border-color:#e07a7a; }
    .note{ margin-top:6px; font-size:14px; opacity:.88; }
    .answers{ margin-top:10px; font-size:14px; }
    .answers p{ margin:6px 0; }

    /* Dialogue */
    .audioRow{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    audio{ width: min(860px, 100%); }
    .controls{ display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 14px; }
    .hidden{ display:none; }
    .dialogue{
      border: 1px solid #ddd;
      border-radius: 14px;
      padding: 14px;
      margin-top: 8px;
    }
    .line{
      opacity: 0;
      transform: translateY(6px);
      transition: opacity 280ms ease, transform 280ms ease;
      padding: 10px 10px;
      border-radius: 12px;
      margin: 6px 0;
      border: 1px solid transparent;
    }
    .line.visible{ opacity:1; transform: translateY(0); }
    .line:hover{
      border-color:#e6e6e6;
      background:#fafafa;
      cursor:pointer;
    }
    .speaker{ font-weight:800; margin-right:6px; }
    .meta{
      font-size: 12px;
      opacity: 0.6;
      margin-top: 10px;
      padding-top: 10px;
      border-top: 1px dashed #eee;
    }
    .tiny{ font-size:13px; opacity:.75; }
    hr.sep{ border:none; border-top:1px dashed #eee; margin: 14px 0; }
  </style>
</head>

<body>
  <div class="page">
    <h1>Greenpoint Script Exercises</h1>
    <p class="sub">Interactive practice: collocations, meaning checks, and listening support.</p>

    <!-- 1) One word fits all gaps -->
    <section class="section" id="ex1">
      <h2>1) One word fits all gaps</h2>
      <p class="prompt"><strong>Find a word in the script that can fill in all of the gaps.</strong></p>

      <p style="font-size:18px; margin:0;">
        While Berlin might be best known for its music and club
        <input id="ex1_gap1" class="gap" autocomplete="off" spellcheck="false" aria-label="Gap 1" />,
        its food
        <input id="ex1_gap2" class="gap" autocomplete="off" spellcheck="false" aria-label="Gap 2" />
        is less well-known. That may be because German food is generally considered not-so-exciting.
        However, Berlin‚Äôs restaurant
        <input id="ex1_gap3" class="gap" autocomplete="off" spellcheck="false" aria-label="Gap 3" />
        is not limited to beer and bratwurst. Immigrants from all over the world have been settling in Berlin for decades,
        and bringing their cuisines with them.
      </p>

      <div class="row" style="margin-top:14px;">
        <button id="ex1_check" type="button">Check</button>
        <button id="ex1_reset" type="button">Reset</button>
        <button id="ex1_reveal" type="button">Reveal</button>
        <label class="tiny" style="display:flex; gap:8px; align-items:center;">
          <input id="ex1_lock" type="checkbox" />
          lock when correct
        </label>
      </div>

      <div id="ex1_feedback" class="feedback" aria-live="polite"></div>
      <div id="ex1_hint" class="note" style="display:none;"></div>
    </section>

    <!-- 2) Collocation with neighborhood (two acceptable + ‚Äúother answer also correct‚Äù) -->
    <section class="section" id="ex2">
      <h2>2) Collocation: neighborhood</h2>
      <p class="prompt"><strong>Look back at the script and find another word that collocates with <em>neighborhood</em>.</strong></p>

      <div class="row">
        <input id="ex2_input" type="text" placeholder="Type one word" autocomplete="off" />
        <button id="ex2_check" type="button">Check answer</button>
      </div>

      <div id="ex2_feedback" class="feedback" aria-live="polite"></div>
    </section>

    <!-- 3) Best word describes neighborhood (MC) -->
    <section class="section" id="ex3">
      <h2>3) Best word</h2>
      <p class="prompt"><strong>What word best describes the Greenpoint neighborhood?</strong></p>

      <div class="options">
        <label><input type="radio" name="ex3_answer" value="lively"> lively</label>
        <label><input type="radio" name="ex3_answer" value="scene"> scene</label>
        <label><input type="radio" name="ex3_answer" value="nightlife"> nightlife</label>
      </div>

      <button id="ex3_check" type="button" style="margin-top:14px;">Check answer</button>
      <div id="ex3_feedback" class="feedback" aria-live="polite"></div>
    </section>

    <!-- 4) Greenpoint is lively because‚Ä¶ (MC) -->
    <section class="section" id="ex4">
      <h2>4) Listening / meaning check</h2>
      <p class="prompt"><strong>Greenpoint is lively because‚Ä¶</strong></p>

      <div class="options">
        <label><input type="radio" name="ex4_answer" value="a"> so many people live there.</label>
        <label><input type="radio" name="ex4_answer" value="b"> there‚Äôs lots of things to do for fun.</label>
        <label><input type="radio" name="ex4_answer" value="c"> it‚Äôs far away from Manhattan.</label>
      </div>

      <button id="ex4_check" type="button" style="margin-top:14px;">Check answer</button>
      <div id="ex4_feedback" class="feedback" aria-live="polite"></div>
    </section>

    <!-- 5) Collocation building (3x3) -->
    <section class="section" id="ex5">
      <h2>5) Build collocations</h2>
      <p class="prompt"><strong>Think of three other collocations with each of the following words.</strong></p>

      <div>
        <p style="margin:0 0 6px;"><strong>A lively</strong> ‚Ä¶</p>
        <div class="row">
          <input data-group="ex5_lively" placeholder="1" autocomplete="off" />
          <input data-group="ex5_lively" placeholder="2" autocomplete="off" />
          <input data-group="ex5_lively" placeholder="3" autocomplete="off" />
        </div>
      </div>

      <hr class="sep" />

      <div>
        <p style="margin:0 0 6px;"><strong>A remote</strong> ‚Ä¶</p>
        <div class="row">
          <input data-group="ex5_remote" placeholder="1" autocomplete="off" />
          <input data-group="ex5_remote" placeholder="2" autocomplete="off" />
          <input data-group="ex5_remote" placeholder="3" autocomplete="off" />
        </div>
      </div>

      <hr class="sep" />

      <div>
        <p style="margin:0 0 6px;"><strong>‚Ä¶ scene</strong></p>
        <div class="row">
          <input data-group="ex5_scene" placeholder="1" autocomplete="off" />
          <input data-group="ex5_scene" placeholder="2" autocomplete="off" />
          <input data-group="ex5_scene" placeholder="3" autocomplete="off" />
        </div>
      </div>

      <div class="row" style="margin-top:14px;">
        <button id="ex5_check" type="button">Check answers</button>
        <button id="ex5_reset" type="button">Reset</button>
      </div>

      <div id="ex5_feedback" class="feedback" aria-live="polite"></div>
    </section>

    <!-- 6) Dialogue reveal synced with audio (show/hide) -->
    <section class="section" id="ex6">
      <h2>6) Listening: dialogue reveals line by line</h2>
      <p class="prompt"><strong>Press play. Click ‚ÄúShow dialogue‚Äù when you want the text support.</strong></p>

      <div class="audioRow">
        <audio id="ex6_audio" controls preload="metadata">
          <source src="https://uploads.teachablecdn.com/attachments/0f3bc5a9809446919365dd5bcda413bc.mp3" type="audio/mpeg" />
          Your browser does not support the audio element.
        </audio>
      </div>

      <div class="controls">
        <button id="ex6_show" type="button">Show dialogue</button>
        <button id="ex6_hide" type="button" class="hidden">Hide dialogue</button>
      </div>

      <div id="ex6_dialogue" class="dialogue hidden" aria-live="polite"></div>
      <div class="tiny" style="margin-top:10px;">
        Tip: You can click a revealed line to jump to that moment in the audio.
      </div>
    </section>
  </div>

  <script>
    /* -----------------------------
      EX1: One word fits all gaps
    ------------------------------*/
    (function () {
      const CORRECT = "scene";
      const gaps = [
        document.getElementById("ex1_gap1"),
        document.getElementById("ex1_gap2"),
        document.getElementById("ex1_gap3"),
      ];
      const checkBtn = document.getElementById("ex1_check");
      const resetBtn = document.getElementById("ex1_reset");
      const revealBtn = document.getElementById("ex1_reveal");
      const lockToggle = document.getElementById("ex1_lock");
      const feedback = document.getElementById("ex1_feedback");
      const hint = document.getElementById("ex1_hint");

      const normalize = (s) => (s || "").trim().toLowerCase().replace(/\s+/g, " ");

      function setBorders(color) { gaps.forEach(g => g.style.borderColor = color); }
      function setAll(v) { gaps.forEach(g => g.value = v); }
      function lockIf(ok) {
        const lock = lockToggle.checked && ok;
        gaps.forEach(g => g.disabled = lock);
      }
      function showFeedback(msg, ok) {
        feedback.style.display = "block";
        feedback.className = "feedback " + (ok ? "good" : "bad");
        feedback.innerHTML = msg;
      }
      function hideFeedback() {
        feedback.style.display = "none";
        feedback.className = "feedback";
        feedback.innerHTML = "";
      }
      function showHint(msg) {
        hint.style.display = "block";
        hint.textContent = msg;
      }
      function hideHint() {
        hint.style.display = "none";
        hint.textContent = "";
      }

      // Mirror typing across all gaps
      gaps.forEach(inp => {
        inp.addEventListener("input", () => {
          const v = inp.value;
          gaps.forEach(other => { if (other !== inp) other.value = v; });
          gaps.forEach(g => g.style.borderColor = "#bbb");
          hideFeedback(); hideHint();
        });
        inp.addEventListener("keydown", (e) => {
          if (e.key === "Enter") { e.preventDefault(); check(); }
        });
      });

      function check() {
        const user = normalize(gaps[0].value);
        if (!user) {
          showFeedback("Type one word first üôÇ", false);
          setBorders("#e07a7a");
          lockIf(false);
          return;
        }
        const ok = user === CORRECT;
        if (ok) {
          showFeedback("‚úÖ Correct ‚Äî ‚Äúscene‚Äù fits all gaps.", true);
          setBorders("#7cc47c");
          hideHint();
        } else {
          showFeedback("‚ùå Not quite. Try again.", false);
          setBorders("#e07a7a");
          showHint(`Hint: ${CORRECT.length} letters, starts with ‚Äú${CORRECT[0]}‚Äù.`);
        }
        lockIf(ok);
      }

      function reset() {
        gaps.forEach(g => { g.value = ""; g.disabled = false; g.style.borderColor = "#bbb"; });
        lockToggle.checked = false;
        hideFeedback(); hideHint();
        gaps[0].focus();
      }

      function reveal() {
        setAll(CORRECT);
        showFeedback("Answer revealed: <strong>scene</strong> ‚úÖ", true);
        setBorders("#7cc47c");
        hideHint();
        lockToggle.checked = true;
        lockIf(true);
      }

      checkBtn.addEventListener("click", check);
      resetBtn.addEventListener("click", reset);
      revealBtn.addEventListener("click", reveal);
      lockToggle.addEventListener("change", () => lockIf(normalize(gaps[0].value) === CORRECT));

      gaps[0].focus();
    })();

    /* -----------------------------
      EX2: Collocation with neighborhood
      acceptable: remote OR cool
      show note about other answer
    ------------------------------*/
    (function () {
      const ACCEPT = ["remote", "cool"];
      const input = document.getElementById("ex2_input");
      const btn = document.getElementById("ex2_check");
      const fb = document.getElementById("ex2_feedback");

      const normalize = (s) => (s || "").trim().toLowerCase().replace(/\s+/g, " ");

      function show(msg, ok) {
        fb.style.display = "block";
        fb.className = "feedback " + (ok ? "good" : "bad");
        fb.innerHTML = msg;
      }

      btn.addEventListener("click", () => {
        const user = normalize(input.value);
        if (!user) {
          show("Type one word first üôÇ", false);
          input.style.borderColor = "#e07a7a";
          return;
        }

        if (ACCEPT.includes(user)) {
          input.style.borderColor = "#7cc47c";
          const other = ACCEPT.find(a => a !== user);
          show(`‚úÖ Correct!<div class="note"><strong>${other}</strong> would also be correct.</div>`, true);
        } else {
          input.style.borderColor = "#e07a7a";
          show(`‚ùå Not quite.<div class="note">Acceptable answers: <strong>remote</strong>, <strong>cool</strong></div>`, false);
        }
      });

      input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") { e.preventDefault(); btn.click(); }
      });
    })();

    /* -----------------------------
      EX3: Best word describes Greenpoint (MC)
      correct: scene
    ------------------------------*/
    (function () {
      const CORRECT = "scene";
      const btn = document.getElementById("ex3_check");
      const fb = document.getElementById("ex3_feedback");

      function show(msg, ok) {
        fb.style.display = "block";
        fb.className = "feedback " + (ok ? "good" : "bad");
        fb.innerHTML = msg;
      }

      btn.addEventListener("click", () => {
        const sel = document.querySelector('input[name="ex3_answer"]:checked');
        if (!sel) return show("Choose one option first üôÇ", false);

        if (sel.value === CORRECT) {
          show("‚úÖ Correct!", true);
        } else {
          show("‚ùå Not quite.<div class='note'>Correct answer: <strong>scene</strong></div>", false);
        }
      });
    })();

    /* -----------------------------
      EX4: Greenpoint is lively because‚Ä¶ (MC)
      correct: b
    ------------------------------*/
    (function () {
      const CORRECT = "b";
      const btn = document.getElementById("ex4_check");
      const fb = document.getElementById("ex4_feedback");

      function show(msg, ok) {
        fb.style.display = "block";
        fb.className = "feedback " + (ok ? "good" : "bad");
        fb.innerHTML = msg;
      }

      btn.addEventListener("click", () => {
        const sel = document.querySelector('input[name="ex4_answer"]:checked');
        if (!sel) return show("Choose one option first üôÇ", false);

        if (sel.value === CORRECT) {
          show("‚úÖ Correct!", true);
        } else {
          show("‚ùå Not quite.<div class='note'>Correct answer: <strong>there‚Äôs lots of things to do for fun.</strong></div>", false);
        }
      });
    })();

    /* -----------------------------
      EX5: Collocation building (loose match to model list)
    ------------------------------*/
    (function () {
      const MODEL = {
        ex5_lively: ["atmosphere", "discussion", "debate", "city", "crowd"],
        ex5_remote: ["area", "location", "village", "neighborhood", "island"],
        ex5_scene:  ["music", "art", "food", "club", "restaurant"]
      };

      const inputs = Array.from(document.querySelectorAll("input[data-group]"));
      const checkBtn = document.getElementById("ex5_check");
      const resetBtn = document.getElementById("ex5_reset");
      const fb = document.getElementById("ex5_feedback");

      const normalize = (s) => (s || "").trim().toLowerCase().replace(/\s+/g, " ");

      function show(msg, ok) {
        fb.style.display = "block";
        fb.className = "feedback " + (ok ? "good" : "bad");
        fb.innerHTML = msg;
      }

      function renderModel() {
        return `
          <div class="answers">
            <p><strong>A lively:</strong> atmosphere, discussion, debate, city, crowd</p>
            <p><strong>A remote:</strong> area, location, village, neighborhood, island</p>
            <p><strong>‚Ä¶ scene:</strong> music, art, food, club, restaurant</p>
          </div>
        `;
      }

      checkBtn.addEventListener("click", () => {
        let correctCount = 0;

        inputs.forEach(inp => {
          const group = inp.dataset.group;
          const v = normalize(inp.value);
          const ok = v && (MODEL[group] || []).includes(v);
          inp.style.borderColor = ok ? "#7cc47c" : "#e07a7a";
          if (ok) correctCount++;
        });

        if (correctCount > 0) {
          show(`‚úÖ You found <strong>${correctCount}</strong> model collocation(s).` + renderModel(), true);
        } else {
          show(`‚ùå No matches with the model answers yet (that‚Äôs okay).` + renderModel(), false);
        }
      });

      resetBtn.addEventListener("click", () => {
        inputs.forEach(inp => { inp.value = ""; inp.style.borderColor = "#bbb"; });
        fb.style.display = "none";
        fb.className = "feedback";
        fb.innerHTML = "";
      });
    })();

    /* -----------------------------
      EX6: Dialogue reveal synced with audio + show/hide
    ------------------------------*/
    (function () {
      const audio = document.getElementById("ex6_audio");
      const dialogueEl = document.getElementById("ex6_dialogue");
      const showBtn = document.getElementById("ex6_show");
      const hideBtn = document.getElementById("ex6_hide");

      let enabled = false;

      // You can tweak these timestamps if you want tighter sync.
      const lines = [
        { t: 0.00, speaker: "Maria", text: "License plate number A647, that must be my Uber. Hello, are you my driver?" },
        { t: 7.72, speaker: "Ali",   text: "Hi. Yes, I‚Äôm Ali. Please get in. So you‚Äôre going to Greenpoint?" },
        { t: 16.14, speaker: "Maria", text: "Um, I think I‚Äôm going to‚Ä¶ Manhattan? The address I gave is 1026 Manhattan Avenue. Isn‚Äôt that in Manhattan." },
        { t: 27.06, speaker: "Ali",   text: "It must be your first time in New York. Where are you from?" },
        { t: 32.90, speaker: "Maria", text: "Russia. Yeah, my first time. So, we‚Äôre not going to Manhattan? We‚Äôre going to‚Ä¶ Green pond?" },
        { t: 42.67, speaker: "Ali",   text: "Greenpoint. It‚Äôs in Brooklyn." },
        { t: 46.62, speaker: "Maria", text: "Oh?! Is it far from Manhattan?" },
        { t: 50.62, speaker: "Ali",   text: "Well, it‚Äôs a little hard to get to Manhattan from there. It‚Äôs a little bit, what‚Äôs the word?" },
        { t: 58.15, speaker: "Maria", text: "Remote?" },
        { t: 60.02, speaker: "Ali",   text: "Yeah, a little remote. But it‚Äôs a very cool neighborhood. It's, you know, very busy with restaurants." },
        { t: 72.42, speaker: "Maria", text: "It‚Äôs got a good restaurant scene?" },
        { t: 73.91, speaker: "Ali",   text: "Right. A good restaurant scene and a good nightlife scene as well. And you know, like lots of young people, it‚Äôs you know like‚Ä¶" },
        { t: 83.37, speaker: "Maria", text: "You mean it‚Äôs a lively neighborhood." },
        { t: 86.36, speaker: "Ali",   text: "Yes, exactly: lively. Your English is really good." },
        { t: 92.31, speaker: "Maria", text: "Oh, thank you. I actually used to be an English teacher in Russia." },
        { t: 98.17, speaker: "Ali",   text: "And I was a doctor in my home country (laughs) and now I drive a taxi in New York. What a life!" }
      ];

      // Build UI once
      dialogueEl.innerHTML = "";
      const nodes = lines.map(line => {
        const div = document.createElement("div");
        div.className = "line";
        div.innerHTML = `<span class="speaker">${line.speaker}:</span><span class="text">${line.text}</span>`;
        div.addEventListener("click", () => {
          audio.currentTime = line.t;
          audio.play();
        });
        dialogueEl.appendChild(div);
        return div;
      });

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = "Click ‚ÄúShow dialogue‚Äù to enable line-by-line text. Click any revealed line to jump.";
      dialogueEl.appendChild(meta);

      let lastShown = -1;
      function resetReveal() {
        nodes.forEach(n => n.classList.remove("visible"));
        lastShown = -1;
      }

      function revealUpTo(time) {
        if (!enabled) return;
        while (lastShown + 1 < lines.length && lines[lastShown + 1].t <= time + 0.05) {
          lastShown++;
          nodes[lastShown].classList.add("visible");
        }
      }

      audio.addEventListener("timeupdate", () => {
        revealUpTo(audio.currentTime);
      });

      audio.addEventListener("seeked", () => {
        if (!enabled) return;
        resetReveal();
        revealUpTo(audio.currentTime);
      });

      showBtn.addEventListener("click", () => {
        enabled = true;
        dialogueEl.classList.remove("hidden");
        showBtn.classList.add("hidden");
        hideBtn.classList.remove("hidden");
        resetReveal();
        revealUpTo(audio.currentTime);
      });

      hideBtn.addEventListener("click", () => {
        enabled = false;
        dialogueEl.classList.add("hidden");
        showBtn.classList.remove("hidden");
        hideBtn.classList.add("hidden");
        resetReveal();
      });
    })();
  </script>
</body>
</html>
